# 实验报告4

## 烧录系统环境准备

烧录系统：

- 格式化内存卡。
- Win32DiskImager烧写镜像



## 树莓派连接电脑

- 树莓派插上显示器，启动连接wifi连接

- 将树莓派连上wifi，打开树莓派系统下的命令行终端（Ctrl+Alt+T），输入ifconfig查看我们的ip地址。

![image-20221224213641256](http://picbed.elcarimqaq.top/img/image-20221224213641256.png)

- 可以查看到树莓派的ip地址为192.168.5.75，于是可以通过ssh远程连接树莓派

![image-20221224185920220](http://picbed.elcarimqaq.top/img/image-20221224185920220.png)



除了ssh连接，和用显示器查看树莓派，我们也可以VNC Viewer 远程连接树莓派。

![image-20230103124812806](http://picbed.elcarimqaq.top/img/image-20230103124812806.png)

## 环境准备

- 安装python

- 安装opencv,编译

  ![image.png](http://picbed.elcarimqaq.top/img/1603784315314666.png)

![image.png](https://www.yahboom.com/Public/ueditor/php/upload/image/20201027/1603784343663909.png)

![image.png](https://www.yahboom.com/Public/ueditor/php/upload/image/20201027/1603784386477600.png)

![image-20230103124952658](http://picbed.elcarimqaq.top/img/image-20230103124952658.png)

### face_recognition

## 连接csi摄像头

测试摄像头能否显示：

![image-20221224213700717](http://picbed.elcarimqaq.top/img/image-20221224213700717.png)

## 代码

代码：https://github.com/ElcarimQAQ/AIOT-Cours   e/blob/master/assignment4/face_detaction.ipynb

![image-20221224212652389](http://picbed.elcarimqaq.top/img/image-20221224212652389.png)



利用opencv中的haarcascade来实现人脸检测:

首先加载在github中下载harr级联分类器xml模型：

```python
face_cascade = cv2.CascadeClassifier('/home/pi/opencv/data/haarcascades/haarcascade_frontalface_default.xml')
```

人脸检测：

```python
def get_faces(frame):
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)#将图片转为灰度图，减少计算量
    faces = faceCascade.detectMultiScale(gray)
    return faces, frame
```

人脸检测结果：

![image-20221224210522723](http://picbed.elcarimqaq.top/img/image-20221224210522723.png)

### 识别人脸

实现了在图片上的人脸检测，还需进一步实现视频上的人脸跟踪



# 参考资料

树莓派人脸识别门禁 https://blog.csdn.net/DekHub/article/details/117871505